<mat-tab-group
  *ngIf="sources().length > 0"
  (selectedIndexChange)="onSourceTabChange($event)">
  <mat-tab *ngFor="let s of sources()" [label]="s.nombre"></mat-tab>
</mat-tab-group>

<div class="selector-row">
  <!-- Nivel taxonómico -->
  <mat-form-field appearance="fill" class="field">
    <mat-label>Nivel</mat-label>
    <mat-select [ngModel]="selectedLevel?.variable_id" (ngModelChange)="onLevelChange($event)">
      <mat-option *ngFor="let level of taxonomicLevels()" [value]="level.variable_id">
        {{ level.variable }}
      </mat-option>
    </mat-select>
  </mat-form-field>

  <!-- Búsqueda -->
  <mat-form-field appearance="fill" class="field grow">
    <mat-label>Búsqueda sobre Nivel</mat-label>
    <input
      matInput
      [formControl]="searchControl"
      placeholder="Escribe al menos 3 caracteres..."
      [matAutocomplete]="auto">

    <mat-autocomplete
      #auto="matAutocomplete"
      (optionSelected)="onAutocompleteSelected($event)"
      autoActiveFirstOption>

      <mat-option *ngFor="let species of suggestions()" [value]="species">
        <div class="option">
          
          <strong>{{ (species.datos.genero || '') + ' ' + (species.datos.especie || '') }}</strong><br>

          <small>
            {{ species.datos.reino || '-' }} /
            {{ species.datos.phylum || '-' }} /
            {{ species.datos.clase || '-' }} /
            {{ species.datos.orden || '-' }} /
            {{ species.datos.familia || '-' }}
          </small>
        </div>
      </mat-option>

      <mat-option *ngIf="loading()" disabled>Cargando…</mat-option>
    </mat-autocomplete>
  </mat-form-field>
</div>
